{% load app_extras comments_extras %}
<div id="{{ post|element_id }}"
     class="flex flex-col my-2 card shadow-md rounded-l overflow-hidden p-4">
    <!-- Top Level: Author, Tags, etc. -->
    <ul class="flex text-sm font-medium rounded-l dark:text-gray-400 rtl:divide-x-reverse">
        <li class="flex-1 text-left">
            <div class="flex p-0 m-0 w-full">
                <button type="button"
                        class="inline-flex items-center py-2 px-4 text-sm font-medium text-gray-900 bg-white border border-gray-200 border-r-0 rounded-l-l hover:bg-gray-100 hover:text-blue-700 focus:z-10 focus:ring-2 focus:ring-blue-700 focus:text-blue-700 dark:bg-gray-800 dark:border-gray-700 dark:text-white dark:hover:text-white dark:hover:bg-gray-700 dark:focus:ring-blue-500 dark:focus:text-white">
                    <span class="p4 w-3 h-3 bg-interest-strong rounded-full mr-2"></span>
                    Subjekt
                </button>
                <button type="button"
                        class="inline-flex items-center px-4 py-2 text-sm font-medium text-gray-900 bg-white border border-gray-200 rounded-r-l hover:bg-gray-100 hover:text-blue-700 focus:z-10 focus:ring-2 focus:ring-blue-700 focus:text-blue-700 dark:bg-gray-800 dark:border-gray-700 dark:text-white dark:hover:text-white dark:hover:bg-gray-700 dark:focus:ring-blue-500 dark:focus:text-white">
                    <span class="p4 w-3 h-3 bg-interest-strong rounded-full mr-2"></span>
                    @Danby Choi
                </button>
            </div>
        </li>
        <li class="flex-shrink-0">
            <div class="flex p-0 m-0">
                <button type="button"
                        class="inline-flex items-center px-4 py-2 text-sm font-medium text-gray-900 bg-white border border-gray-200 rounded-l hover:bg-gray-100 hover:text-blue-700 focus:z-10 focus:ring-2 focus:ring-blue-700 focus:text-blue-700 dark:bg-gray-800 dark:border-gray-700 dark:text-white dark:hover:text-white dark:hover:bg-gray-700 dark:focus:ring-blue-500 dark:focus:text-white">
                    -
                </button>
            </div>
        </li>
        <li class="flex-1 text-right">
            <div class="flex p-0 m-0 w-full justify-end space-x-0">
                <button type="button"
                        class="inline-flex items-center px-4 py-2 text-sm font-medium text-gray-900 bg-white border border-gray-200 border-l-0 border-r-0 rounded-l-lg hover:bg-gray-100 hover:text-blue-700 focus:z-10 focus:ring-2 focus:ring-blue-700 focus:text-blue-700 dark:bg-gray-800 dark:border-gray-700 dark:text-white dark:hover:text-white dark:hover:bg-gray-700 dark:focus:ring-blue-500 dark:focus:text-white">
                    <p>#</p>
                    <p>Pride</p>
                    <span class="p4 w-3 h-3 bg-interest-strong rounded-full mr-2"></span>
                </button>
                <button type="button"
                        class="inline-flex items-center px-4 py-2 text-sm font-medium text-gray-900 bg-white border border-gray-200 border-l-0 border-r-0 rounded-none hover:bg-gray-100 hover:text-blue-700 focus:z-10 focus:ring-2 focus:ring-blue-700 focus:text-blue-700 dark:bg-gray-800 dark:border-gray-700 dark:text-white dark:hover:text-white dark:hover:bg-gray-700 dark:focus:ring-blue-500 dark:focus:text-white">
                    <p>#</p>
                    <p>2024</p>
                    <span class="p4 w-3 h-3 bg-disinterest-strong rounded-full mr-2"></span>
                </button>
                <button type="button"
                        class="inline-flex items-center px-4 py-2 text-sm font-medium text-gray-900 bg-white border border-gray-200 border-l-0 border-r-0 rounded-r hover:bg-gray-100 hover:text-blue-700 focus:z-10 focus:ring-2 focus:ring-blue-700 focus:text-blue-700 dark:bg-gray-800 dark:border-gray-700 dark:text-white dark:hover:text-white dark:hover:bg-gray-700 dark:focus:ring-blue-500 dark:focus:text-white">
                    <p>#</p>
                    <p>2024</p>
                    <span class="p4 w-3 h-3 bg-disinterest-strong rounded-full mr-2"></span>
                </button>
            </div>
        </li>
    </ul>
    <!-- Middle Level: Content, Title, Description, etc. -->
    <article>
        <header>
            <a href="{% url 'posts:detail' post.id %}"
               preload="mouseover"
               class="no-anchor">{{ post.title }}</a>
        </header>
        <p>
            <a href="{{ post.url }}" target="_blank">{{ post.url }}</a>
        </p>
        <p class="text-sm muted">
            <!--{% include "partials/profile_link.html" with user=post.user %}
            {% points_count post %}
            •

            •
            -->
            <span class="whitespace-nowrap">
                {% blocktranslate trimmed with age=post.submit_date|timesince %}
                    {{ age }} ago
                {% endblocktranslate %}
            </span>
            •
            {% comment_count post %}
        </p>
    </article>
    <div id="detail-preview{{ post.id }}"></div>
    <!-- Bottom Level: Preview. Engagement.  -->
    <ul class="flex text-sm font-medium rounded-l dark:text-gray-400 rtl:divide-x-reverse">
        <li class="flex-1 text-left">
            <div class="flex p-0 m-0 w-full">{{ post.submit_date }}</div>
        </li>
        <li class="flex-shrink-0">
            <div class="flex p-0 m-0">
                <button type="button"
                        hx-get="{% url 'posts:detail_content' post.id %}"
                        hx-swap="innerHTML"
                        hx-target="#detail-preview{{ post.id }}"
                        class="inline-flex items-center px-4 py-2 text-sm font-medium text-gray-900 bg-white border border-gray-200 rounded-l hover:bg-gray-100 hover:text-blue-700 focus:z-10 focus:ring-2 focus:ring-blue-700 focus:text-blue-700 dark:bg-gray-800 dark:border-gray-700 dark:text-white dark:hover:text-white dark:hover:bg-gray-700 dark:focus:ring-blue-500 dark:focus:text-white">
                    +
                </button>
            </div>
        </li>
        <li class="flex-1 text-right">
            <div class="flex p-0 m-0 w-full justify-end space-x-0">
                {% include "partials/button_bar.html#form" with item=post %}
            </div>
        </li>
    </ul>
    <!-- New div where the article content will be inserted -->
</div>
<!--
div id="{{ post|element_id }}"
     class="flex flex-col my-4 card bg-white shadow-md rounded-lg overflow-hidden p-4">
    <article max-w-full sm:max-w-md md:max-w-lg lg:max-w-xl xl:max-w-2xl>
    -->
