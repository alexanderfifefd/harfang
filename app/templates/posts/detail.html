{% extends "base_page.html" %}
{% load i18n %}
{% block content %}
    <article>
        <section>
            <h1>
                <a href="{% url 'post' post.id %}" class="no-link">{{ post.title }}</a>
            </h1>
            <p>
                {% url 'profile' post.user.username  as profile_url %}
                {% blocktranslate with age=post.submit_date|timesince username=post.user.username %}
                    posted {{ age }} ago by <a href="{{ profile_url }}">{{ username|escape }}</a>
                {% endblocktranslate %}
            </p>
            <p>
                <a href="{{ post.url }}" target="_blank" rel="noreferrer">{% translate "Link" %}</a>
            </p>
        </section>
        <section>
            {{ post.body|linebreaks }}
        </section>
        <br>
        <br>
        <section id="comments">
            {% block comments %}
                {% if form %}
                    <form class="not-prose"
                          action=""
                          method="post"
                          hx-post=""
                          hx-vals='{"use_block": "comments"}'
                          hx-target="#comments">
                        {% csrf_token %}
                        {% include "comments/fragments/form.html" %}
                        <button>{% translate "Add Comment" %}</button>
                    </form>
                {% endif %}
                <h3>{% translate "Comments" %}</h3>
                {% include "comments/tree.html" %}
            {% endblock %}
        </section>
    </article>
{% endblock %}
